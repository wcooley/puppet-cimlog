{"name":"puppet-cimlog_report","tagline":"Puppet report processor providing CIM-like logging. ","body":"puppet-cimlog\r\n=============\r\n\r\nDescription\r\n-----------\r\n\r\nCIM Log is a Puppet report processor that formats report data as field=value\r\npairs and logs over syslog, so Splunk can automatically extract fields. This is\r\nbeing designed for use with my [Puppet\r\nPulse](https://github.com/wcooley/splunk-puppet) App for Splunk, so its output\r\nwill change to meet the needs of that.\r\n\r\nInstallation\r\n------------\r\n\r\nTo use, check out or download into your Puppet modules directory or install using the Puppet module tool. `puppet.conf` needs the following:\r\n\r\n* pluginsync enabled\r\n* agent configured to send reports\r\n* master configured with `cimlog` as a report processor\r\n\r\nMy `puppet.conf` looks something like this:\r\n\r\n    [main]\r\n    pluginsync = true\r\n\r\n    [agent]\r\n    report = true\r\n\r\n    [master]\r\n    reports = cimlog\r\n\r\nOutput\r\n------\r\n\r\nSome sample anonymized output:\r\n\r\n    masterofpuppets puppet-master[17621]: [cimlog] dest=puppetclient event_id=1370889076 ver=\"1370862162\" kind=\"apply\" status=\"changed\"\r\n    masterofpuppets puppet-master[17621]: [cimlog/metrics] dest=puppetclient event_id=1370889076 category=\"changes\" total=\"6\"\r\n    masterofpuppets puppet-master[17621]: [cimlog/metrics] dest=puppetclient event_id=1370889076 category=\"time\" units=\"seconds\" rtime_augeas=\"7.186\" rtime_config_retrieval=\"5.346\" rtime_cron=\"0.003\" rtime_exec=\"10.949\" rtime_file=\"4.121\" rtime_file_line=\"0.001\" rtime_filebucket=\"0.001\" rtime_group=\"0.025\" rtime_host=\"0.002\" rtime_package=\"0.861\" rtime_service=\"6.153\" total=\"35.042\" rtime_user=\"0.042\" rtime_vcsrepo=\"0.330\" rtime_yumrepo=\"0.024\"\r\n    masterofpuppets puppet-master[17621]: [cimlog/metrics] dest=puppetclient event_id=1370889076 category=\"resources\" changed=\"6\" failed=\"0\" failed_to_restart=\"0\" out_of_sync=\"6\" restarted=\"0\" scheduled=\"0\" skipped=\"7\" total=\"764\"\r\n    masterofpuppets puppet-master[17621]: [cimlog/metrics] dest=puppetclient event_id=1370889076 category=\"events\" failure=\"0\" success=\"6\" total=\"6\"\r\n    masterofpuppets puppet-master[17621]: [cimlog/logs] dest=puppetclient event_id=1370889076 source=\"/Stage[main]/Host_puppetclient/Exec[update_generated_foo]/returns\" level=\"notice\" msg=\"executed successfully\"\r\n    masterofpuppets puppet-master[17621]: [cimlog/logs] dest=puppetclient event_id=1370889076 source=\"/Stage[main]/Puppet::Master::Hacks/Cfengine_conf[etc/foo.conf]/File[/etc/puppet/modules/foo/files/foo.conf]/content\" level=\"notice\" msg=\"content changed '{md5}0c96ce187f3184d4bf3d9ade7f50a7f1' to '{md5}baaa5134a6f497348a3236416b24105a'\"\r\n    masterofpuppets puppet-master[17621]: [cimlog/logs] dest=puppetclient event_id=1370889076 source=\"Puppet\" level=\"notice\" msg=\"Finished catalog run in 43.47 seconds\"\r\n    masterofpuppets puppet-master[17621]: [cimlog/resource] dest=puppetclient event_id=1370889076 resource=\"File[/etc/puppet/modules/foo/files/foo.conf]\" resource_title=\"/etc/puppet/modules/foo/files/foo.conf\" resource_type=\"File\" resource_changes=\"1\"\r\n    masterofpuppets puppet-master[17621]: [cimlog/change] dest=puppetclient event_id=1370889076 resource=\"File[/etc/puppet/modules/foo/files/foo.conf]\" change_type=\"content_changed\" change_property=\"content\" change_status=\"success\" change_previous=\"{md5}0c96ce187f3184d4bf3d9ade7f50a7f1\" change_desired=\"{md5}baaa5134a6f497348a3236416b24105a\"\r\n    masterofpuppets puppet-master[17621]: [cimlog/resource] dest=puppetclient event_id=1370889076 resource=\"Exec[update_generated_foo]\" resource_title=\"update_generated_foo\" resource_type=\"Exec\" resource_changes=\"1\"\r\n    masterofpuppets puppet-master[17621]: [cimlog/change] dest=puppetclient event_id=1370889076 resource=\"Exec[update_generated_foo]\" change_type=\"executed_command\" change_property=\"returns\" change_status=\"success\" change_previous=\"notrun\" change_desired=\"0\"\r\n\r\nAuthor\r\n------\r\nWil Cooley <wcooley(at)nakedape.cc>\r\n\r\nLicense\r\n-------\r\n    Author:: Wil Cooley (wcooley(at)nakedape.cc)\r\n    Copyright:: Copyright (c) 2013 Wil Cooley\r\n    License:: Apache License, Version 2.0\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n        http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}